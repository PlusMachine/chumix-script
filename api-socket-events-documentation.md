# API –∏ Socket.IO –°–æ–±—ã—Ç–∏—è –ü–æ–∫–µ—Ä–Ω–æ–≥–æ –ë—ç–∫–µ–Ω–¥–∞

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç HTTP API –∏ Socket.IO —Å–æ–±—ã—Ç–∏—è, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤ –ø–æ–∫–µ—Ä–Ω–æ–º –±—ç–∫–µ–Ω–¥–µ. –û–Ω –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏ –±—ç–∫–µ–Ω–¥–∞.

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [HTTP API Endpoints](#http-api-endpoints)
   - [–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏](#—Å–æ–∑–¥–∞–Ω–∏–µ-—Å–µ—Å—Å–∏–∏)
   - [–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞](#–ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ-–∏–≥—Ä–æ–∫–∞)
   - [–†–µ–∂–∏–º –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è](#—Ä–µ–∂–∏–º-–Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è)
   - [–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è](#–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ-–Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è)
   - [–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞](#–ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ-–∏–≥—Ä–æ–∫–∞)
   - [–í—ã—Ö–æ–¥ –∏–≥—Ä–æ–∫–∞](#–≤—ã—Ö–æ–¥-–∏–≥—Ä–æ–∫–∞)
2. [Socket.IO –°–æ–±—ã—Ç–∏—è](#socketio-—Å–æ–±—ã—Ç–∏—è)
   - [–°–æ–±—ã—Ç–∏—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –∫ –∫–ª–∏–µ–Ω—Ç—É](#—Å–æ–±—ã—Ç–∏—è-–æ—Ç-—Å–µ—Ä–≤–µ—Ä–∞-–∫-–∫–ª–∏–µ–Ω—Ç—É)
   - [–°–æ–±—ã—Ç–∏—è –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É](#—Å–æ–±—ã—Ç–∏—è-–æ—Ç-–∫–ª–∏–µ–Ω—Ç–∞-–∫-—Å–µ—Ä–≤–µ—Ä—É)
3. [–°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö](#—Å—Ç—Ä—É–∫—Ç—É—Ä—ã-–¥–∞–Ω–Ω—ã—Ö)
   - [TableState](#tablestate)
   - [PrivateState](#privatestate)
   - [Winners](#winners)

## HTTP API Endpoints

–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –±–∞–∑–æ–≤–æ–º—É URL: `http://localhost:3001/api/sessions/`

### –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏

**Endpoint**: `POST /create`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞**:
```json
{
  "ante": 10,
  "bigBlind": 50,
  "smallBlind": 25,
  "numSeats": 6,
  "buyIn": 1000
}
```

**–û—Ç–≤–µ—Ç**:
```json
{
  "roomId": "123456",
  "message": "Table created successfully"
}
```

### –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞

**Endpoint**: `POST /join`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞**:
```json
{
  "roomId": "123456",
  "name": "Player1",
  "socketId": "socket_id_from_client"
}
```

**–û—Ç–≤–µ—Ç**:
```json
{
  "message": "Player Player1 joined successfully",
  "playerId": "player_unique_id",
  "seatIndex": 0,
  "stack": 1000
}
```

**–î–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä–≤–µ—Ä–∞**:
1. –î–æ–±–∞–≤–ª—è–µ—Ç –∏–≥—Ä–æ–∫–∞ –≤ —Å–µ—Å—Å–∏—é
2. –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç —Å–æ–∫–µ—Ç –∫ –∫–æ–º–Ω–∞—Ç–µ
3. –¢—Ä–∞–Ω—Å–ª–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç–æ–ª–∞ –≤—Å–µ–º –∏–≥—Ä–æ–∫–∞–º –∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è–º
4. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–æ–ª—å–∫–æ —á—Ç–æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–≤—à–µ–º—É—Å—è –∏–≥—Ä–æ–∫—É (–µ—Å–ª–∏ –∏–≥—Ä–∞ –∏–¥–µ—Ç)
5. –£–≤–µ–¥–æ–º–ª—è–µ—Ç –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤ –æ –Ω–æ–≤–æ–º —É—á–∞—Å—Ç–Ω–∏–∫–µ —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏–µ `playerJoined`

### –†–µ–∂–∏–º –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è

**Endpoint**: `POST /spectate`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞**:
```json
{
  "roomId": "123456",
  "socketId": "socket_id_from_client"
}
```

**–û—Ç–≤–µ—Ç**:
```json
{
  "message": "Spectator joined successfully",
  "spectatorCount": 1,
  "tableState": {
    // –ü–æ–ª–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç–æ–ª–∞, —Å–º. —Å—Ç—Ä—É–∫—Ç—É—Ä—É TableState
  }
}
```

**–î–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä–≤–µ—Ä–∞**:
1. –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è –≤ —Å–µ—Å—Å–∏—é
2. –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç —Å–æ–∫–µ—Ç –∫ –∫–æ–º–Ω–∞—Ç–µ
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç–æ–ª–∞ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—é
4. –£–≤–µ–¥–æ–º–ª—è–µ—Ç –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏–µ `spectatorJoined`

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è

**Endpoint**: `POST /leave-spectate`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞**:
```json
{
  "roomId": "123456",
  "socketId": "socket_id_from_client"
}
```

**–û—Ç–≤–µ—Ç**:
```json
{
  "message": "Spectator left successfully",
  "spectatorCount": 0
}
```

### –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞

**Endpoint**: `POST /reconnect`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞**:
```json
{
  "roomId": "123456",
  "playerId": "player_unique_id",
  "socketId": "new_socket_id_from_client"
}
```

**–û—Ç–≤–µ—Ç**:
```json
{
  "message": "Player reconnected successfully",
  "playerId": "player_unique_id",
  "seatIndex": 0,
  "stack": 950
}
```

### –í—ã—Ö–æ–¥ –∏–≥—Ä–æ–∫–∞

**Endpoint**: `POST /leave`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞**:
```json
{
  "roomId": "123456",
  "seatIndex": 0,
  "socketId": "socket_id_from_client"
}
```

**–û—Ç–≤–µ—Ç**:
```json
{
  "message": "Player left the session successfully",
  "isTableEmpty": false
}
```

## Socket.IO –°–æ–±—ã—Ç–∏—è

### –°–æ–±—ã—Ç–∏—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –∫ –∫–ª–∏–µ–Ω—Ç—É

| –ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö |
|------------------|----------|--------------|
| `connected` | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è | `{ socketId: string }` |
| `socket_id` | –û—Ç–ø—Ä–∞–≤–∫–∞ ID —Å–æ–∫–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç—É | `{ socketId: string }` |
| `tableState` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å—Ç–æ–ª–∞ | [–°–º. —Å—Ç—Ä—É–∫—Ç—É—Ä—É TableState](#tablestate) |
| `privateState` | –ü—Ä–∏–≤–∞—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–≥—Ä–æ–∫–∞ | [–°–º. —Å—Ç—Ä—É–∫—Ç—É—Ä—É PrivateState](#privatestate) |
| `error` | –û—à–∏–±–∫–∞ | `{ message: string }` |
| `message` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ | `{ type: string, data: any }` |
| `actionSuccess` | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–µ–π—Å—Ç–≤–∏—è | `{ message: string }` |
| `actionPerformed` | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –¥–µ–π—Å—Ç–≤–∏–∏ –∏–≥—Ä–æ–∫–∞ | `{ playerId: string, action: string, amount: number, timestamp: number }` |
| `showdownResults` | –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—Å–∫—Ä—ã—Ç–∏—è –∫–∞—Ä—Ç | `{ winners: [–°–º. —Å—Ç—Ä—É–∫—Ç—É—Ä—É Winners](#winners) }` |
| `playerJoined` | –ù–æ–≤—ã–π –∏–≥—Ä–æ–∫ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è | `{ roomId: string, message: string, playerName: string }` |
| `spectatorJoined` | –ù–æ–≤—ã–π –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è | `{ message: string, spectatorCount: number }` |

### –°–æ–±—ã—Ç–∏—è –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É

| –ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö | –û—Ç–≤–µ—Ç–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ |
|------------------|----------|--------------|------------------|
| `pokerAction` | –î–µ–π—Å—Ç–≤–∏–µ –∏–≥—Ä–æ–∫–∞ (—Å—Ç–∞–≤–∫–∞, —Ñ–æ–ª–¥ –∏ —Ç.–¥.) | `{ roomId: string, playerId: string, action: string, amount: number }` | `actionSuccess` –∏–ª–∏ `error` |
| `joinRoom` | –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ | `{ roomId: string, playerId: string }` | `tableState` |
| `leaveRoom` | –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç –∫–æ–º–Ω–∞—Ç—ã | `{ roomId: string, playerId: string }` | - |
| `reconnectPlayer` | –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞ | `{ roomId: string, playerId: string }` | `tableState` –∏ `privateState` |
| `startGame` | –ó–∞–ø—Ä–æ—Å –Ω–∞ –Ω–∞—á–∞–ª–æ –∏–≥—Ä—ã | `{ roomId: string, playerId: string }` | `tableState` |
| `getTableState` | –ó–∞–ø—Ä–æ—Å –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å—Ç–æ–ª–∞ | `{ roomId: string }` | `tableState` |
| `get_socket_id` | –ó–∞–ø—Ä–æ—Å ID —Å–æ–∫–µ—Ç–∞ | - | `socket_id` |
| `client_ready` | –°–∏–≥–Ω–∞–ª –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞ | - | `socket_id` |
| `request_socket_id` | –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –∑–∞–ø—Ä–æ—Å ID —Å–æ–∫–µ—Ç–∞ (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏) | - | `socket_id` |

## –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

### TableState

```typescript
{
  // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Å—Ç–∞—Ö –∑–∞ —Å—Ç–æ–ª–æ–º (–º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –∏–ª–∏ null –¥–ª—è –ø—É—Å—Ç—ã—Ö –º–µ—Å—Ç)
  seats: [
    { stack: number, betSize: number, totalChips: number },
    null,
    { stack: number, betSize: number, totalChips: number },
    // ...
  ],
  
  // –ú–∞—Å—Å–∏–≤ –∏–Ω–¥–µ–∫—Å–æ–≤ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ –≤ —Ç–µ–∫—É—â–µ–π —Ä–∞–∑–¥–∞—á–µ
  handPlayers: number[],
  
  // –û–±—â–∏–µ –∫–∞—Ä—Ç—ã –Ω–∞ —Å—Ç–æ–ª–µ
  communityCards: [
    { rank: string, suit: string }, // –ù–∞–ø—Ä–∏–º–µ—Ä: { rank: "A", suit: "h" }
    // ...
  ],
  
  // –¢–µ–∫—É—â–∏–π —Ä–∞—É–Ω–¥ —Ç–æ—Ä–≥–æ–≤–ª–∏
  roundOfBetting: "preflop" | "flop" | "turn" | "river" | null,
  
  // –ë–∞–Ω–∫–∏ (–æ—Å–Ω–æ–≤–Ω–æ–π –∏ –ø–æ–±–æ—á–Ω—ã–µ)
  pots: [
    { size: number, eligiblePlayers: number[] },
    // ...
  ],
  
  // –ò–Ω–¥–µ–∫—Å –∏–≥—Ä–æ–∫–∞, —á—å—è –æ—á–µ—Ä–µ–¥—å –¥–µ–ª–∞—Ç—å —Ö–æ–¥
  playerToAct: number | null,
  
  // –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞
  legalActions: {
    actions: string[], // –ù–∞–ø—Ä–∏–º–µ—Ä: ["fold", "check", "bet"]
    chipRange: { min: number, max: number } | null
  },
  
  // –§–ª–∞–≥–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
  isHandInProgress: boolean,
  isBettingRoundInProgress: boolean,
  areBettingRoundsCompleted: boolean,
  numActivePlayers: number,
  
  // –°–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ –∑–∞ —Å—Ç–æ–ª–æ–º —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
  playersState: [
    {
      playerId: string,
      name: string,
      seatIndex: number
    },
    // ...
  ]
}
```

### PrivateState

```typescript
{
  // –í—Å–µ –ø–æ–ª—è –∏–≥—Ä–æ–∫–∞
  playerId: string,
  name: string,
  seatIndex: number,
  socketId: string,
  originalData: {
    totalChips: number,
    stack: number,
    betSize: number
  },
  
  // –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞
  privateData: {
    holeCards: [
      { rank: string, suit: string },
      { rank: string, suit: string }
    ] | null
  },
  
  // –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –∏–≥—Ä–æ–∫–∞
  availableActions: {
    actions: string[], // –ù–∞–ø—Ä–∏–º–µ—Ä: ["fold", "check", "bet"]
    chipRange: { min: number, max: number } | null
  }
}
```

### Winners

```typescript
[
  // –î–ª—è –∫–∞–∂–¥–æ–≥–æ –±–∞–Ω–∫–∞ (–æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∏ –ø–æ–±–æ—á–Ω—ã—Ö)
  [
    // –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è —ç—Ç–æ–≥–æ –±–∞–Ω–∫–∞:
    [
      seatIndex, // –ò–Ω–¥–µ–∫—Å –º–µ—Å—Ç–∞ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
      { 
        cards: [{ rank: string, suit: string }, ...], // –ö–∞—Ä—Ç—ã –∏–≥—Ä–æ–∫–∞
        ranking: string, // –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Flush")
        strength: number // –ß–∏—Å–ª–æ–≤–∞—è —Å–∏–ª–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
      },
      [{ rank: string, suit: string }, ...] // –û–±—â–∏–µ –∫–∞—Ä—Ç—ã –Ω–∞ —Å—Ç–æ–ª–µ
    ],
    // ... –¥—Ä—É–≥–∏–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª–∏ —ç—Ç–æ–≥–æ –±–∞–Ω–∫–∞
  ],
  // ... –¥—Ä—É–≥–∏–µ –±–∞–Ω–∫–∏
]
```

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É playersState –∏ seats

- `playersState` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ –∑–∞ —Å—Ç–æ–ª–æ–º —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º –¥–∞–Ω–Ω—ã—Ö: `playerId`, `name` –∏ `seatIndex`
- `seats` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ —Å—Ç–µ–∫–µ, —Ä–∞–∑–º–µ—Ä–µ —Å—Ç–∞–≤–∫–∏ –∏ —Ç.–¥.
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–æ–º –∏ –µ–≥–æ –¥–∞–Ω–Ω—ã–º–∏ –≤ `seats` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ –∏–Ω–¥–µ–∫—Å—É –º–µ—Å—Ç–∞ (`seatIndex`)

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ —Å—Ç–µ–∫–µ –∏ —Å—Ç–∞–≤–∫–µ –∏–≥—Ä–æ–∫–∞

```javascript
// –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø–æ–¥—Ö–æ–¥):
const playerStack = playersState[i].stack;

// –ü—Ä–∞–≤–∏–ª—å–Ω–æ (—Ç–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥):
const seatIndex = playersState[i].seatIndex;
const playerStack = tableState.seats[seatIndex].stack;
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π –∏–≥—Ä–æ–∫–∞

1. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ `pokerAction` —Å –¥–∞–Ω–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è
2. –°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏—è (–æ—á–µ—Ä–µ–¥—å —Ö–æ–¥–∞, –¥–æ–ø—É—Å—Ç–∏–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è, —Ä–∞–∑–º–µ—Ä —Å—Ç–∞–≤–∫–∏)
3. –°–µ—Ä–≤–µ—Ä –ø—Ä–∏–º–µ–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ –∫ —Å—Ç–æ–ª—É —á–µ—Ä–µ–∑ `table.actionTaken(action, amount)`
4. –°–µ—Ä–≤–µ—Ä —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é `composeStateWithActivePlayers` 
5. –°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É —á–µ—Ä–µ–∑ `actionSuccess`
6. –°–µ—Ä–≤–µ—Ä —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É–µ—Ç –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç–æ–ª–∞ –≤—Å–µ–º —á–µ—Ä–µ–∑ `tableState`
7. –°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã–º –∏–≥—Ä–æ–∫–∞–º —á–µ—Ä–µ–∑ `privateState`
8. –°–µ—Ä–≤–µ—Ä —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–µ–π—Å—Ç–≤–∏–∏ –≤—Å–µ–º —á–µ—Ä–µ–∑ `actionPerformed`

### –ó–∞–ø—Ä–æ—Å –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å—Ç–æ–ª–∞

–ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç–æ–ª–∞, –æ—Ç–ø—Ä–∞–≤–∏–≤ —Å–æ–±—ã—Ç–∏–µ `getTableState`:

```javascript
socket.emit('getTableState', { roomId: 'your_room_id' });

// –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞
socket.on('tableState', (tableStateData) => {
  console.log('–ê–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç–æ–ª–∞:', tableStateData);
});
```

### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è (spectator)

1. –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Socket.IO
2. –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π socketId —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏–µ `socket_id`
3. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç HTTP –∑–∞–ø—Ä–æ—Å `/spectate` —Å –ø–æ–ª—É—á–µ–Ω–Ω—ã–º socketId –∏ roomId
4. –°–µ—Ä–≤–µ—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è –≤ —Å–µ—Å—Å–∏—é –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ç–æ–ª–∞
5. –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Socket.IO —Å–æ–±—ã—Ç–∏–µ `tableState`

### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –∏–≥—Ä–æ–∫–∞

1. –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Socket.IO
2. –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π socketId —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏–µ `socket_id`
3. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç HTTP –∑–∞–ø—Ä–æ—Å `/join` —Å socketId, roomId –∏ –∏–º–µ–Ω–µ–º –∏–≥—Ä–æ–∫–∞
4. –°–µ—Ä–≤–µ—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç –∏–≥—Ä–æ–∫–∞ –≤ —Å–µ—Å—Å–∏—é –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
5. –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Socket.IO —Å–æ–±—ã—Ç–∏—è `tableState` –∏ `privateState`
6. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏–µ `pokerAction`

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ —á—Ç–æ –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- ‚úÖ –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏—è–º–∏
- ‚úÖ –†–µ–∂–∏–º –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è (spectator)
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `playersState` –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –º–µ—Å—Ç –∑–∞ —Å—Ç–æ–ª–æ–º
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π –∏–≥—Ä–æ–∫–æ–≤
- ‚úÖ –¢—Ä–∞–Ω—Å–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π —Å—Ç–æ–ª–∞ –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–µ–¥—Å—Ç–æ–∏—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:
- üöß –î–µ—Ç–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤
- üöß –£–ª—É—á—à–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è —Ä–µ–∂–∏–º–∞ –∏–≥—Ä–æ–∫–∞
- üöß –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–π –∏–≥—Ä–æ–∫–æ–≤
- üöß –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ü–∞ –∏–≥—Ä—ã –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤—ã–∏–≥—Ä—ã—à–µ–π
